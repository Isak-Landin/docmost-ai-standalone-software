:root{
  --bg:#0b0d10; --panel:#0f1217; --panel2:#0c0f14; --border:#20283a;
  --text:#e7e7e7; --muted:rgba(231,231,231,.65);
  --btn:#1a2230; --btnh:#222c3d;
}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;background:var(--bg);color:var(--text)}
.topbar{display:flex;gap:12px;align-items:baseline;padding:12px 16px;border-bottom:1px solid var(--border);background:var(--panel)}
.brand{font-weight:800}
.meta{color:var(--muted);font-size:12px}
.layout{display:flex;height:calc(100vh - 49px)}
.sidebar{width:240px;min-width:220px;max-width:280px;border-right:1px solid var(--border);background:var(--panel);padding:12px;overflow:auto}
.sidebar-title{font-weight:700;margin-bottom:10px}
.spaces{display:flex;flex-direction:column;gap:8px}
.space{border:1px solid var(--border);background:var(--panel2);border-radius:10px;padding:10px;cursor:pointer}
.space:hover{outline:1px solid rgba(231,231,231,.15)}
.space .name{font-weight:650}
.space .id{margin-top:4px;font-size:12px;color:var(--muted)}
.main{flex:1;display:flex;flex-direction:column;min-width:0}
.spacebar{display:flex;gap:10px;align-items:center;padding:10px 12px;border-bottom:1px solid var(--border);background:var(--panel)}
.space-title{font-weight:750;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.spacer{flex:1}
.btn{background:var(--btn);color:var(--text);border:1px solid var(--border);padding:8px 10px;border-radius:10px;cursor:pointer}
.btn:hover{background:var(--btnh)}
.btn:disabled{opacity:.55;cursor:not-allowed}
.content{flex:1;display:grid;grid-template-columns: 1fr 1.6fr;gap:12px;padding:12px;min-height:0}
.treewrap,.chatwrap{border:1px solid var(--border);border-radius:12px;background:var(--panel);display:flex;flex-direction:column;min-height:0}
.panel-title{font-weight:700;padding:10px 12px;border-bottom:1px solid var(--border)}
.tree{padding:10px 10px;overflow:auto;min-height:0}

.node{display:flex;align-items:center;gap:8px;padding:6px 6px;border-radius:8px;min-width:0}
.node:hover{background:rgba(255,255,255,.04)}
.toggle{width:22px;height:22px;display:inline-flex;align-items:center;justify-content:center;border:1px solid var(--border);border-radius:6px;background:var(--panel2);cursor:pointer;user-select:none;flex:0 0 auto}
.toggle.disabled{opacity:.35;cursor:default}
.checkbox{width:16px;height:16px;flex:0 0 auto}

/* prevent long titles from overflowing */
.label{display:flex;flex-direction:column;min-width:0;flex:1 1 auto}
.label .t{font-weight:650;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

/* children indentation */
.children{margin-left:22px;padding-left:12px;border-left:1px dashed rgba(255,255,255,.08)}
.hidden{display:none}

.chat{flex:1;padding:10px 12px;overflow:auto;min-height:0}
.msg{border:1px solid var(--border);background:var(--panel2);border-radius:10px;padding:8px 10px;margin-bottom:8px}
.msg .who{font-size:12px;color:var(--muted);margin-bottom:4px}
.composer{display:flex;gap:10px;padding:10px 12px;border-top:1px solid var(--border);background:var(--panel)}
.composer textarea{flex:1;min-height:44px;max-height:160px;resize:vertical;padding:10px;border-radius:10px;border:1px solid var(--border);background:var(--panel2);color:var(--text)}
.chatmeta{display:flex;justify-content:space-between;gap:10px;padding:10px 12px;border-top:1px solid var(--border);color:var(--muted);font-size:12px}
.muted{color:var(--muted)}
